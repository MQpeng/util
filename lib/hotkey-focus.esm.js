var c=class{constructor(e,t=!0,n="keydown"){this.elements=[];this.useCapture=!0;this.eventsHandler=[];this.keyEvent="keydown";this.updateElements(e),this.useCapture=t,this.keyEvent=n}updateElements(e){if(this.removeAllListener(),!e||!e.length)throw new Error("Elements must be not null or undefined");this.destroyLink(),this.elements=y(e)}bindKey(e,t){this.elements.forEach((n,i,f)=>{let o=a=>{let s="",l;if(!(e&&(l=e(a,n),l===!1))){switch(a.key){case"Enter":case"ArrowRight":s="next";break;case"ArrowLeft":s="last";break;case"ArrowDown":s="bottom";break;case"ArrowUp":s="top";break}this.getFocus(l||n[s]),t&&t(a,n)}};this.eventsHandler.push({element:n.value,onHandler:o}),n.value.addEventListener(this.keyEvent,o,this.useCapture)})}removeAllListener(){this.eventsHandler.forEach(({element:e,onHandler:t})=>{e.removeEventListener(this.keyEvent,t,this.useCapture)}),this.eventsHandler.length=0}getFocus(e){!e||(e.focus&&e.focus(),e.select&&e.select())}destroyLink(){this.elements&&this.elements.length&&this.elements.filter(e=>e).forEach(e=>{e.next=null,e.last=null,e.top=null,e.bottom=null})}};function y(r){let e=[],t=-1,n=0,i=0,f=0;return Array.from(r).forEach((o,a,s)=>{let l=p(o);Math.abs(f-l)>5&&(t++,i=Math.max(n,i),n=0,f=l);let u=t-1<0?null:e[n+i*(t-1)];u&&(u.bottom=o);let h={value:o,next:s[a+1],last:s[a-1],row:t,column:n,top:u==null?void 0:u.value};e.push(h),n++}),e}function d(r){for(var e=r.offsetLeft,t=r.offsetParent;t!==null;)e+=t.offsetLeft+t.clientLeft,t=t.offsetParent;return e}function p(r){for(var e=r.offsetTop,t=r.offsetParent;t!==null;)e+=t.offsetTop+t.clientTop,t=t.offsetParent;return e}export{y as buildLink,c as default,d as getElementLeft,p as getElementTop};
